<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Management with R Markdown</title>
    <meta charset="utf-8" />
    <meta name="author" content="Martin Frigaard" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <meta name="description" content="Introduction to R Markdown"/>
    <meta name="generator" content="xaringan and remark.js"/>
    <meta name="github-repo" content="mjfrigaard/pdg-r/"/>
    <meta name="twitter:title" content="Data Management with R Markdown"/>
    <meta name="twitter:description" content="Introduction to R Markdown"/>
    <meta name="twitter:url" content="https://github.com/mjfrigaard/ph-lacounty-r/"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:creator" content="@mjfrigaard"/>
    <meta name="twitter:site" content="@mjfrigaard"/>
    <meta property="og:title" content="Data Management with R Markdown"/>
    <meta property="og:description" content="Introduction to R Markdown"/>
    <meta property="og:url" content="https://github.com/mjfrigaard/ph-lacounty-r/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Martin Frigaard"/>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link href="libs/pagedtable/css/pagedtable.css" rel="stylesheet" />
    <script src="libs/pagedtable/js/pagedtable.js"></script>
    <link rel="stylesheet" href="css/lexis.css" type="text/css" />
    <link rel="stylesheet" href="css/lexis-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">






layout: true

&lt;!-- this adds the link footer to all slides, depends on footer-small class in css--&gt;

&lt;div class="footer-small"&gt;&lt;span&gt;https://github.com/mjfrigaard/ph-lacounty-r/&lt;/div&gt;

---
name: title-slide
class: title-slide, center, middle, inverse

# Data Management with R Markdown
#.fancy[Combine data, code, and output in one document]

&lt;br&gt;

.large[by Martin Frigaard]

Written: October 03 2022

Updated: December 02 2022

.footer-large[.right[.fira[
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;[Created using the "λέξις" theme](https://jhelvy.github.io/lexis/index.html#what-does-%CE%BB%CE%AD%CE%BE%CE%B9%CF%82-mean)
]]]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Materials 

The slides are in the `slides.pdf` file

--

The materials for this training are in the `worksheets` folder: 

```
worksheets
├── import.Rmd
├── export.Rmd
├── objects.Rmd
├── rmd-basic.Rmd
├── rmd-tables.Rmd
└── rmd-visualizations.Rmd
```


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Outline 

&lt;br&gt;

.leftcol[

#### 1. Importing data 

#### 2. Common Data Objects 

#### 3. R Markdown 

]

--

.rightcol[

#### 4. R Markdown Data Visualizations

#### 5. R Markdown Tables

#### 6. Exporting Data 


]

---
background-image: url(www/pdg-hex.png)
class: center, middle, inverse
background-position: 96% 4%
background-size: 6%

# .large[Import Data] 

--

&lt;br&gt;&lt;br&gt;

.font90[.green[Open `import.Rmd` to follow along]]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data 

#### Packages for importing data:


| File type                           | Package               |
|-------------------------------------|-----------------------|
| SAS (`.sas7bdat`)                   | `haven`               |
| Excel (`.xlsx`, `.xls`)             | `readxl`, `openxlsx`  |
| Plain Text (`.csv`, `.tsv`, `.txt`) | `readr`, `data.table` |


---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Environment*)

#### The .blue[Environment] Pane

&lt;img src="www/rstudio-env.png" width="100%" height="100%" /&gt;

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Import Dataset*)

.leftcol[

#### Click .blue[Import Dataset]

#### Click .blue[From SAS]

]

.rightcol[

&lt;img src="www/rstudio-import-dataset.png" width="100%" height="100%" style="display: block; margin: auto auto auto 0;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Required Packages*)

#### If you see a prompt to install required packages, click .blue[Yes]

&lt;img src="www/rstudio-dep-pkgs.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Dialogue Box*)

.leftcol20[

.font80[**You will see the .blue[Import Statistical Data] Dialogue Box**]

.font80[**Click .blue[Browse] and navigate to the `data/medical.sas7bdat` file**]

]

.rightcol80[

&lt;img src="www/rstudio-import-dialogue-01.png" width="80%" height="80%" style="display: block; margin: auto 0 auto auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Dialogue Box*)

.leftcol20[

.font80[**You will see the path in .blue[File/URL]**]

.font80[**A preview of the data will appear in .blue[Data Preview] **]

]

.rightcol80[

&lt;img src="www/rstudio-import-dialogue-02.png" width="70%" height="70%" style="display: block; margin: auto 0 auto auto;" /&gt;

&lt;img src="www/rstudio-import-dialogue-03.png" width="90%" height="90%" style="display: block; margin: auto 0 auto auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Dialogue Box*)


.font90[**You see we have additional .blue[Import Options]**]

&lt;img src="www/rstudio-import-dialogue-04.png" width="90%" height="90%" style="display: block; margin: auto 0 auto auto;" /&gt;

--

.font90[**We also see a .blue[Code Preview]. Click on the small copy icon, then click .blue[Import]**]

&lt;img src="www/rstudio-import-dialogue-05.png" width="90%" height="90%" style="display: block; margin: auto 0 auto auto;" /&gt;


---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Data Viewer*)

.font90[**RStudio imports the data and opens it in the .blue[Data Viewer]**]

&lt;img src="www/rstudio-import-dialogue-06.png" width="100%" height="100%" style="display: block; margin: auto 0 auto auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (*Data Viewer*)

.font90[**We can also see `medical` has been added to our .blue[Environment] pane**]

&lt;img src="www/rstudio-import-dialogue-07.png" width="95%" height="95%" style="display: block; margin: auto 0 auto auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data 

--

&lt;br&gt;

### .font120[Is what we did reproducible?]

--

&lt;br&gt;

.font120[***.red[No, but it can be!]***]

--

&lt;br&gt;

.font120[Open `import.Rmd` from the `worksheets` folder]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data 


.leftcol20[

In `Import.Rmd` 

- Instructions inside `#` boxes won't run

- Fill in `author` and `date` (inside quotes)

]

.rightcol80[

&lt;img src="www/import-instructions.png" width="75%" height="75%" style="display: block; margin: auto 0 auto auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (from local)

We already have the code to import `medical.sas7bdat` from local

&lt;img src="www/rstudio-import-dialogue-05.png" width="90%" height="90%" style="display: block; margin: auto 0 auto auto;" /&gt;

--

We need to adjust the file path to `../data/medical.sas7bdat`

.leftcol[

.code70[

```
. # importing with dialogue
└── data/
      └── medical.sas7bdat
```

]
]

.rightcol[

.code70[

```
. # importing from file
├── data/
│   └──  medical.sas7bdat
└── worksheets/
    └──  import.Rmd
```

]
]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (download and import)

&lt;br&gt;

We can also download the file from a `url`

.code70[


```r
download.file(
*   url = "http://www.principlesofeconometrics.com/sas/medical.sas7bdat",
    )
```

]

--

And save this to a local `destfile`

.code70[


```r
download.file(
    url = "http://www.principlesofeconometrics.com/sas/medical.sas7bdat", 
*   destfile = "../data/downloads/medical.sas7bdat")
```

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (download and import)

&lt;br&gt;

.font120[Now we can import the file from our `downloads/` folder]

.leftcol35[

.code60[

```
. # importing from downloads folder
├── data/
│   ├── medical.sas7bdat
│   └── downloads/
│            └── medical.sas7bdat
└── worksheets/
    └── import.Rmd
```

]

]


.rightcol65[

&lt;br&gt;

.code70[


```r
medical &lt;- read_sas("../data/downloads/medical.sas7bdat") 
```

]


]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (parameters)

.font90[For a more permanent solution, we can use parameters in our R Markdown file to store file location (or other metadata)]

.code70[

```yaml
title: "May Report"
author: "Joe Smith"
date: "2022-11-30"
output: html_document

params:
  sas_data_url: !r file.path("http://www.principlesofeconometrics.com/sas/medical.sas7bdat")
  sas_data_dir: !r c("../data/sas/")
```

]

--

.code70[

```r
*download.file(url = params$sas_data_url,
    )
```
]

--

.code70[


```r
download.file(url = params$sas_data_url, 
*   destfile = params$sas_data_dir)
```

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (multiple files)

If we have a folder with multiple files, we can reduce duplicated code with iteration. 

--

.leftcol[
.code80[

```
. # importing multiple files
├── data/sas/
│   ├── elemapi-2000.sas7bdat
│   ├── elemapi2-2000.sas7bdat
│   ├── hsb2.sas7bdat
│   └── nations.sas7bdat
└── worksheets/
    └── import.Rmd
```

]
]

--

.rightcol[

.code80[


```r
# create vector of files
sas_filenames &lt;- list.files(
            path = "../data/sas", 
            full.names = TRUE)
all_sas_data &lt;- sas_filenames |&gt; 
    # give this vector names
    purrr::set_names() |&gt; 
    # use read_sas() on all files
    purrr::map(.x = , .f = read_sas)
```

]

.font90[`all_sas_data` is a list of datasets]

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Importing Data (multiple files)


.font90[Each named according to their path in `data/sas/`]

.code55[


```r
str(all_sas_data)
*# $ ../data/sas/elemapi-2000.sas7bdat : tibble [400 × 21] (S3: tbl_df/tbl/data.frame)
#   ..$ snum    : num [1:400] 906 889 887 876 888 ...
#   .. ..- attr(*, "label")= chr "school number"
#   ..$ dnum    : num [1:400] 41 41 41 41 41 98 98 108 108 108 ...
#   .. ..- attr(*, "label")= chr "district number"
#   .. [list output truncated]
*#  $ ../data/sas/elemapi2-2000.sas7bdat: tibble [400 × 22] (S3: tbl_df/tbl/data.frame)
#   ..$ snum    : num [1:400] 906 889 887 876 888 ...
#   .. ..- attr(*, "label")= chr "school number"
#   ..$ dnum    : num [1:400] 41 41 41 41 41 98 98 108 108 108 ...
#   .. ..- attr(*, "label")= chr "district number"
#   .. [list output truncated]
*#  $ ../data/sas/hsb2.sas7bdat         : tibble [200 × 11] (S3: tbl_df/tbl/data.frame)
#   ..$ id     : num [1:200] 3 5 16 35 8 19 6 1 4 22 ...
#   ..$ female : num [1:200] 0 0 0 1 1 1 1 1 1 0 ...
#   .. [list output truncated]
*#  $ ../data/sas/nations.sas7bdat      : tibble [109 × 15] (S3: tbl_df/tbl/data.frame)
#   ..$ country : chr [1:109] "Algeria" "Argentin" "Australi" "Austria" ...
#   .. ..- attr(*, "label")= chr "Country"
#   ..$ pop     : num [1:109] 21.9 30.5 15.8 7.6 100.6 ...
#   .. ..- attr(*, "label")= chr "1985 population in millions"
#   .. [list output truncated]
```

]


---
background-image: url(www/pdg-hex.png)
class: center, middle, inverse
background-position: 96% 4%
background-size: 6%

# .large[Common Data Objects]

--

&lt;br&gt;&lt;br&gt;

.font90[.green[Open `objects.Rmd` to follow along]]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: vector

#### Vectors are the fundamental data object in R


&lt;img src="www/atomic-vectors.png" width="85%" height="85%" style="display: block; margin: auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: creating vectors 

&lt;br&gt;

`c()` is used to combine (or concatenate) a variety of elements  

--

`&lt;-` is referred to as the assignment operator, and it’s used with `c()` to assign elements to a designated object

--

*Earlier we used `&lt;-` to create the `medical` dataset*

.leftcol[

Create logical and integer vectors (`log_vec` and `int_vec`)


```r
log_vec &lt;- c(TRUE, FALSE)
int_vec &lt;- c(4L, 7L)
```


]

.rightcol[

Create double and character vectors (`dbl_vec` and `chr_vec`)


```r
dbl_vec &lt;- c(2.2, 8.09)
chr_vec &lt;- c("A", "D")
```


]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: atomic vectors

.cols3[

.font80[Print Atomic Vectors]

.code60[


```r
log_vec
```

```
  [1]  TRUE FALSE
```

```r
int_vec
```

```
  [1] 4 7
```

```r
dbl_vec
```

```
  [1] 2.20 8.09
```

```r
chr_vec
```

```
  [1] "A" "D"
```


]

]

--


.cols3[

.font80[Check with `typeof()`]

.code60[


```r
typeof(log_vec)
```

```
  [1] "logical"
```

```r
typeof(int_vec)
```

```
  [1] "integer"
```

```r
typeof(dbl_vec)
```

```
  [1] "double"
```

```r
typeof(chr_vec)
```

```
  [1] "character"
```

]

]

--

.cols3[

.font80[Check `class()`]

.code60[


```r
class(log_vec)
```

```
  [1] "logical"
```

```r
class(int_vec)
```

```
  [1] "integer"
```

```r
*class(dbl_vec)
```

```
  [1] "numeric"
```

```r
class(chr_vec)
```

```
  [1] "character"
```


]

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: S3 vectors

&lt;img src="www/s3-vectors.png" width="85%" height="85%" style="display: block; margin: auto;" /&gt;


---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: S3 vectors


.leftcol[

.font80[Create S3 Vectors]

.code60[


```r
fct_vec &lt;- factor(
        x = c("Medium", "Low", "High"), 
        levels = c("Low", "Medium", "High"))
date_vec &lt;- c(Sys.Date(), Sys.Date() + 1)
dt_vec &lt;- c(Sys.time(), Sys.time() + (86400*365))
difft_vec &lt;- difftime(
            time1 = Sys.time(), 
            time2 = Sys.time() + (86400*365), 
            units = "days")
```


]

]

.rightcol[

.font80[View S3 vectors]

.code55[


```r
fct_vec
```

```
  [1] Medium Low    High  
  Levels: Low Medium High
```

```r
date_vec
```

```
  [1] "2022-12-02" "2022-12-03"
```

```r
dt_vec
```

```
  [1] "2022-12-02 09:18:22 PST" "2023-12-02 09:18:22 PST"
```

```r
difft_vec
```

```
  Time difference of -365 days
```

]
]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: S3 vectors

.leftcol[

.font80[Check `typeof()`]

.code60[


```r
typeof(fct_vec)
```

```
  [1] "integer"
```

```r
typeof(date_vec)
```

```
  [1] "double"
```

```r
typeof(dt_vec)
```

```
  [1] "double"
```

```r
typeof(difft_vec)
```

```
  [1] "double"
```

]
]

.rightcol[

.font80[Check `class()`]

.code60[


```r
class(fct_vec)
```

```
  [1] "factor"
```

```r
class(date_vec)
```

```
  [1] "Date"
```

```r
class(dt_vec)
```

```
  [1] "POSIXct" "POSIXt"
```

```r
class(difft_vec)
```

```
  [1] "difftime"
```

]
]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: S3 vectors

.font90[**S3 vectors have additional `attributes()`**]

--

.cols3[

.font80[Factor attributes]

.code60[


```r
attributes(fct_vec)
```

```
  $levels
  [1] "Low"    "Medium" "High"  
  
  $class
  [1] "factor"
```


]

]

--

.cols3[

.font80[Date/Datetime attributes]

.code60[


```r
attributes(date_vec)
```

```
  $class
  [1] "Date"
```

```r
attributes(dt_vec)
```

```
  $class
  [1] "POSIXct" "POSIXt" 
  
  $tzone
  [1] ""
```

]
]

--

.cols3[

.font80[Difftime attributes]

.code60[


```r
attributes(difft_vec)
```

```
  $class
  [1] "difftime"
  
  $units
  [1] "days"
```

]
]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: lists

.font90[**Vectors have to be the same type, or `class`**]

--

.font90[**Lists can contain objects of different `class`es**]

--

.leftcol40[


```r
atomic_list &lt;- list(
    'logical vector' = log_vec,
    'integer vector' = int_vec,
    'double vector' = dbl_vec,
    'character vector' = chr_vec
)
```


]

--

.rightcol60[


```r
atomic_list
```

```
  $`logical vector`
  [1]  TRUE FALSE
  
  $`integer vector`
  [1] 4 7
  
  $`double vector`
  [1] 2.20 8.09
  
  $`character vector`
  [1] "A" "D"
```


]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: lists

.font90[**Lists can even contain other lists!**]

--

.leftcol[

.font80[Create list of date vectors]

.code60[

```r
s3_list &lt;- list(
    'date vector' = date_vec,
    'datetime vector' = dt_vec,
    'difftime vector' = difft_vec
)
```
]

.font80[Create list of lists]

.code60[

```r
vector_list &lt;- list(
    'S3 list' = s3_list,
    'Atomic list' = atomic_list
)
```
]

]

--

.rightcol[

.code50[


```r
vector_list
```

```
  $`S3 list`
  $`S3 list`$`date vector`
  [1] "2022-12-02" "2022-12-03"
  
  $`S3 list`$`datetime vector`
  [1] "2022-12-02 09:18:22 PST" "2023-12-02 09:18:22 PST"
  
  $`S3 list`$`difftime vector`
  Time difference of -365 days
  
  
  $`Atomic list`
  $`Atomic list`$`logical vector`
  [1]  TRUE FALSE
  
  $`Atomic list`$`integer vector`
  [1] 4 7
  
  $`Atomic list`$`double vector`
  [1] 2.20 8.09
  
  $`Atomic list`$`character vector`
  [1] "A" "D"
```

]
]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: data.frames

.font120[**A `data.frame` is a rectangular list**]

.leftcol30[

.font80[Create `data.frame`]

.code60[


```r
my_df &lt;- data.frame(
    log_col = log_vec,
    int_col = int_vec,
    dbl_col = dbl_vec,
    chr_col = chr_vec,
    date_col = date_vec,
    dt_col = dt_vec
)
```

]

]

--

.rightcol70[

.font80[View `data.frame`]

.code60[


```r
my_df
```

```
    log_col int_col dbl_col chr_col   date_col              dt_col
  1    TRUE       4    2.20       A 2022-12-02 2022-12-02 09:18:22
  2   FALSE       7    8.09       D 2022-12-03 2023-12-02 09:18:22
```

]

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: data.frames

.font90[**Check the structure of the `data.frame`**]

.code60[


```r
str(my_df)
```

```
  'data.frame':	2 obs. of  6 variables:
   $ log_col : logi  TRUE FALSE
   $ int_col : int  4 7
   $ dbl_col : num  2.2 8.09
   $ chr_col : chr  "A" "D"
   $ date_col: Date, format: "2022-12-02" "2022-12-03"
   $ dt_col  : POSIXct, format: "2022-12-02 09:18:22" "2023-12-02 09:18:22"
```

]

--

.font90[**Check the `class` and `typeof()` for the a `data.frame`**]

.leftcol[

.code60[

```r
class(my_df)
```

```
  [1] "data.frame"
```
]

]

--

.rightcol[

.code60[


```r
typeof(my_df)
```

```
  [1] "list"
```

]

]

---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: tibbles

.font90[**A tibble is a [modern reimagining](https://tibble.tidyverse.org/) of the `data.frame`**]

--

.font90[They are created just like `data.frame`s]

--

.leftcol30[

.font80[Create `tibble`]

.code60[


```r
my_tbl &lt;- tibble(
    log_col = log_vec,
    int_col = int_vec,
    dbl_col = dbl_vec,
    chr_col = chr_vec,
    date_col = date_vec,
    dt_col = dt_vec
)
```

]

]

--

.rightcol70[

.font80[View `tibble`]

.code60[


```r
my_tbl
```

```
  # A tibble: 2 × 6
    log_col int_col dbl_col chr_col date_col   dt_col             
    &lt;lgl&gt;     &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;     &lt;dttm&gt;             
  1 TRUE          4    2.2  A       2022-12-02 2022-12-02 09:18:22
  2 FALSE         7    8.09 D       2022-12-03 2023-12-02 09:18:22
```

]

]


---
background-image: url(www/pdg-hex.png)
class: left, top
background-position: 96% 4%
background-size: 6%

# Data Objects: data.frames &amp; tibbles

.font90[`tibble`s print a little nicer than `data.frame`s, and we'll primarily be using them because they work well with other functions for tables and visualizations.]

--

.code80[


```r
my_df
```

```
    log_col int_col dbl_col chr_col   date_col              dt_col
  1    TRUE       4    2.20       A 2022-12-02 2022-12-02 09:18:22
  2   FALSE       7    8.09       D 2022-12-03 2023-12-02 09:18:22
```

]

--

.code80[


```r
my_tbl
```

```
  # A tibble: 2 × 6
    log_col int_col dbl_col chr_col date_col   dt_col             
    &lt;lgl&gt;     &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;     &lt;dttm&gt;             
  1 TRUE          4    2.2  A       2022-12-02 2022-12-02 09:18:22
  2 FALSE         7    8.09 D       2022-12-03 2023-12-02 09:18:22
```

]


---
background-image: url(www/pdg-hex.png)
class: center, middle, inverse
background-position: 96% 4%
background-size: 6%

# .large[R Markdown]

--

&lt;br&gt;&lt;br&gt;

.font90[.green[Open `rmd-basics.Rmd` to follow along]]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

&lt;img src="www/rmarkdown_wizards.png" width="70%" height="70%" /&gt;

.footer-large[.right[Artwork by @allison_horst]]

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# How R Markdown Works

#### R Markdown combines .red[metadata], prose, *and* executable code 

&lt;img src="www/rmd-yaml.png" width="90%" height="90%" style="display: block; margin: auto;" /&gt;

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# How R Markdown Works

#### R Markdown combines metadata, .red[prose], *and* executable code 

&lt;img src="www/rmd-md.png" width="85%" height="85%" style="display: block; margin: auto;" /&gt;


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# How R Markdown Works

#### R Markdown combines metadata, prose, *and* .red[executable code] 

&lt;img src="www/rmd-code.png" width="75%" height="75%" style="display: block; margin: auto;" /&gt;


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

## `.yaml` = Metadata
### ~~`.md` = Prose~~  
### ~~`.R` = Code~~

--

### YAML is a human friendly data serialization standard for all programming languages.

--

### YAML stands for *'YAML Ain't Markup Language'* (funny, huh?)


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

&lt;br&gt;&lt;br&gt;

.leftcol[

### YAML contains the information about the document we're going to create

]

.rightcol[
.code120[

```yml
---
title: "Untitled"
author: "John Doe"
output: html_document
---
```

]
]


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

&lt;br&gt;

&lt;img src="www/yaml-formatting-01.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

&lt;br&gt;

&lt;img src="www/yaml-formatting-02.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;



---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

&lt;br&gt;

.leftcol[

#### Table of contents: 

.font90[**`toc:`** binary (**`yes`** or **`no`**)]

.font90[**`toc_float:`** logical (**`true`** or **`false`**)]

.font90[**`toc_depth:`** set numerically **`0`** - **`6`**]


]



.rightcol[

#### _Indentation matters in YAML!!_

&gt; Check out the [YAML Fieldguide](https://cran.r-project.org/web/packages/ymlthis/vignettes/yaml-fieldguide.html) for a comprehensive list

]



---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

### Create a floating table of contents

.leftcol60[

.font90[Open the **`rmd-basic.Rmd`** file in the `worksheets` folder] 

.font90[Change the `output` in the YAML header to the following:]

]

--

.rightcol40[
.code70[

```yml
---
title: "R Markdown Basics"
author: ""
date: ""
output: 
  html_document: 
    toc: yes
    toc_float: true
---
```

]
]

--

.font90[***Knit the document again***]


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML 

### Floating table of contents (rendered)

&lt;img src="www/yaml-toc-settings.png" width="90%" height="90%" style="display: block; margin: auto;" /&gt;

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

### Text highlighting and theme options

.leftcol[

.font90[Add **`highlight`** and **`theme`** to the YAML header]

]

.rightcol[
.code80[

```yml
---
title: "R Markdown Basics"
author: ""
date: ""
output: 
  html_document: 
    toc: yes
    toc_float: yes
    highlight: zenburn 
    theme: united 

---
```

]
]

--

#### *Knit the document again*



---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

### Text highlighting and theme options (rendered)

&lt;img src="www/yaml-highlight-theme.png" width="90%" height="90%" style="display: block; margin: auto;" /&gt;

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML


.leftcol40[

### You can change the YAML contents using the settings (small gear)

]


.rightcol60[

&lt;img src="www/knitr-settings.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

]

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

.leftcol[

### This window gives us the ability to manually change some of the YAML settings (but not all of them!)

]

--

.rightcol[

&lt;img src="www/edit-rmd-output-options.png" width="90%" height="90%" style="display: block; margin: auto auto auto 0;" /&gt;

]

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

.leftcol40[

### .font80[Change the **Output Format** to **PDF**]

### .font70[Adjust the level of header in the table of contents to **4**]

### .font70[Set the syntax highlighting to **espresso**]

]

.rightcol60[

&lt;img src="www/pdf-rmd-output-options.png" width="80%" height="80%" style="display: block; margin: auto;" /&gt;
]

--

#### .font80[*Knit the document again*]


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

### .font80[PDF Document Options (rendered)]

.leftcol20[

### .font80[A new window will open with the PDF preview]

]

.rightcol80[

&lt;img src="www/rmd-pdf-rendered-output.png" width="85%" height="85%" style="display: block; margin: auto;" /&gt;

]

---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

### .font80[Common output formats]

&lt;img src="www/rmd-exports.png" width="37%" height="37%" style="display: block; margin: auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: YAML

### Output formats

.font80[

| Function                    | Outputs             |
|-----------------------------|---------------------|
| `html_document()`           | HTML document       |
| `pdf_document()`            | PDF document        |
| `word_document()`           | Word document       |
| `odt_document()`            | ODT document        |
| `rtf_document()`            | RTF document        |
| `md_document()`             | Markdown document   |
| `slidy_presentation()`      | Slidy Slides (HTML) |
| `beamer_presentation()`     | Beamer Slides (PDF) |
| `ioslides_presentation()`   | ioslides (HTML)     |
| `powerpoint_presentation()` | PowerPoint (pptx)   |

]


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%


# R Markdown: Markdown

### ~~`.yaml` = Metadata~~
## `.md` = Prose
### ~~`.R` = Code~~


---
class: left, top
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Markdown

.leftcol[.large[

#### Italics, Bold, and Code

```markdown
For italics, you can use *this* or _this_.

If you want bold, you can use **this** or __this__. 

If you want text formatted as code, you can use `this`.
```

]]

--

.rightcol[.font90[

&lt;br&gt;&lt;br&gt;&lt;br&gt;

For italics, you can use *this* or _this_.

If you want bold, you can use **this** or __this__. 

If you want text formatted as code, you can use `this`.

]]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top

# R Markdown: Markdown

.leftcol[.large[

#### Headers

```md
# Header 1
## Header 2
### Header 3
```

]]

--

.rightcol[.large[.center[

# Header 1  
## Header 2  
### Header 3 

]]]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top

# R Markdown: Markdown

.cols3[

#### Bullets &amp; Numeric Lists

]

.cols3[

&lt;br&gt;

```markdown
  - Item 1  
  - Item 2
      + Item 2a
      + Item 2b
        - Item 2b.1
        - Item 2b.2
    
 1. Item 1
 2. Item 2  
   a. Item 2a  
   b. Item 2b  
```
  
]

.cols3[

&lt;br&gt;

* Item 1  
* Item 2
    + Item 2a
    + Item 2b
      - Item 2b.1
      - Item 2b.2


 1. Item 1
 2. Item 2  
   a. Item 2a  
   b. Item 2b  
 
]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top

# R Markdown: Markdown


.leftcol55[

#### Hyperlinks 

```md
[linked phrase](https://posit.co/)
```



]


--

.rightcol45[

#### *becomes...*

.center[.large[

[linked phrase](https://posit.co/)

]]]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top


# R Markdown: Markdown

.leftcol55[

#### Images 

.small[

```md
![](https://www.r-project.org/logo/Rlogo.png)

![optional caption](https://www.r-project.org/logo/Rlogo.png)
```

]]

--

.rightcol45[

#### *becomes...*

&lt;img src="https://www.r-project.org/logo/Rlogo.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

]





---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top

# R Markdown: Markdown

.leftcol[

#### Math Equations

```md
$equation$

$$ equation $$
```

]

--

&lt;br&gt;

.rightcol[.large[

`\(equation\)`

$$ equation $$

]]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top

# R Markdown: Markdown

.leftcol45[

#### Strike-through

```md
~~strikethrough~~
```

]

--

&lt;br&gt;

.rightcol55[.center[.large[

 ~~strikethrough~~

]]]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
class: left, top

# R Markdown: Markdown

.font90[In `rmd-basic.Rmd`, add the following paragraph in the **R Markdown** section, after the first sentence. 

--

&gt; R Markdown is a plain-text file format that combines narrative text (with markdown, a lightweight markup syntax) and executable code chunks (R, Python, or SQL) to produce multiple output formats (.html, .pdf, .docx, .pptx, etc.)

--

.leftcol[
.font80[
- make 'plain-text' *italic*

- insert the wikipedia page link for [markdown](https://en.wikipedia.org/wiki/Markdown): 
`https://en.wikipedia.org/wiki/Markdown`
]
]

.rightcol[
.font80[
- make the code languages **bold**  

- format the file extensions as `code`
]
]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### ~~`.yaml` = Metadata~~
### ~~`.md` = Prose~~
## `.R` = Code


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### `setup` code chunk

.font90[The first bit of R code in our RMarkdown file is the `setup` chunk]

--

&lt;img src="www/setup-code-chunk.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

--

.font90[Chunks named '`setup`' are special because they can set global options, and they are run first]

--

.font90['`include=FALSE`' means this code is run, but not displayed]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### `setup` code chunk contents

&lt;img src="www/setup-code-chunk.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

--

.leftcol30[

.font90[Load packages]

.code70[

```r
library(tidyverse)
```
]

]

--

.rightcol70[

.font90[Set the URLs for the repositories used by `update.packages`]

.code70[

```r
options(repos = "https://cloud.r-project.org")
```
]

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### `setup` code chunk options

.leftcol60[

.font90[R Markdown code document options come from the `knitr` package]

&lt;img src="www/setup-code-chunk.png" width="100%" height="100%" style="display: block; margin: auto auto auto 0;" /&gt;

]

--

.rightcol40[

.font90[We can set the chunk and knit options the with syntax below:]


```r
knitr::opts_chunk$set()
knitr::opts_knit$set()
```

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Inserting code chunks


.leftcol[

.font120[Use keyboard shortcuts **CMD/CTRL + I** or **ALT/OPTION + I**]


]

--

.rightcol[

&lt;img src="www/insert-code-chunk.png" width="36%" height="36%" style="display: block; margin: auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Code chunks

&lt;br&gt;

.border[

&lt;img src="www/code-chunks.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Code chunk fences

&lt;br&gt;

&lt;img src="www/code-chunk-fences.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Code chunk names and options

&lt;br&gt;

&lt;img src="www/code-chunk-name-options.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Code chunk options

.leftcol[

.font80[Common options for code chunks are:]

.font70[

|Option          | Document Effect                              |
|:-------------- |:-------------------------------------------- |
|`include`       | run code, but do/don't print code and results|
|`eval`          | do/don't evaluate the code                   |
|`echo`          | do/don't print code                          |
|`message`       | do/don't print function messages             |
|`warning`       | do/don't print function warnings             |
|`error`         | do/don't knit document with errors           |

]

]

--

.rightcol[

.font80[More advanced options can control language engines (`engine`), caching (`cache`, `dependson`), and plot animations (`fig.show`)]

.font80[See the [knitr web page](https://yihui.name/knitr/options/) for complete list of options]

]




---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

.leftcol[

.font90[In the `rmd-basic.Rmd` file, delete the **`pressure`** code chunk]

.font90[Insert a new code chunk and name it **`diamonds`**]

.font90[Add the code below]

.code70[


```r
ggplot(data = diamonds, 
          aes(x = carat, y = price)) + 
  geom_point(aes(color = cut))
```

.font90[Set **`echo`** to **`FALSE`**]

]

]

--

.rightcol[

.font90[Create another code chunk and name it **`diamonds-show`**]

.font90[Set the options to display this code, but not execute it]

.font90[**Knit the document**]

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

&lt;img src="www/rmd-chunk-diamonds-show.png" width="65%" height="65%" style="display: block; margin: auto;" /&gt;



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Edit code chunk options

You can also edit code chunk options using the icon (small gear)

&lt;img src="www/code-chunk-settings.png" width="40%" height="40%" style="display: block; margin: auto;" /&gt;




---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown: Code

### Code Chunk Engines

More and more code engines all the time 


```r
names(knitr::knit_engines$get())
```

```
   [1] "awk"       "bash"      "coffee"    "gawk"      "groovy"    "haskell"  
   [7] "lein"      "mysql"     "node"      "octave"    "perl"      "php"      
  [13] "psql"      "Rscript"   "ruby"      "sas"       "scala"     "sed"      
  [19] "sh"        "stata"     "zsh"       "asis"      "asy"       "block"    
  [25] "block2"    "bslib"     "c"         "cat"       "cc"        "comment"  
  [31] "css"       "ditaa"     "dot"       "embed"     "eviews"    "exec"     
  [37] "fortran"   "fortran95" "go"        "highlight" "js"        "julia"    
  [43] "python"    "R"         "Rcpp"      "sass"      "scss"      "sql"      
  [49] "stan"      "targets"   "tikz"      "verbatim"  "glue"      "glue_sql" 
  [55] "gluesql"
```

---
background-image: url(www/pdg-hex.png)
class: center, middle, inverse
background-position: 96% 4%
background-size: 6%

# .large[R Markdown Tables]

--

&lt;br&gt;&lt;br&gt;

.font90[.green[Open `rmd-tables.Rmd` to follow along]]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%


# R Markdown Tables

Import the `nhanes_11_12` data from the `data/csv/` folder.

.code70[

```r
nhanes_11_12 &lt;- data.table::fread(input = "../data/csv/nhanes_11_12.csv")
glimpse(nhanes_11_12)
```
]

.code60[

```
  Rows: 2,121
  Columns: 16
  $ id               &lt;int&gt; 62164, 62176, 62184, 62199, 62200, 62202, 62205, 6220…
  $ gender           &lt;chr&gt; "female", "female", "male", "male", "male", "male", "…
  $ age              &lt;int&gt; 44, 34, 26, 57, 42, 36, 28, 38, 77, 31, 29, 50, 31, 2…
  $ race3            &lt;chr&gt; "White", "White", "Black", "White", "Asian", "Mexican…
  $ education        &lt;chr&gt; "Some College", "College Grad", "High School", "Colle…
  $ hh_income        &lt;chr&gt; "45000-54999", "more 99999", "more 99999", "more 9999…
  $ poverty          &lt;dbl&gt; 1.67, 5.00, 3.85, 5.00, 4.07, 2.83, 5.00, 1.53, 0.97,…
  $ weight           &lt;dbl&gt; 67.2, 68.7, 68.9, 96.9, 73.7, 80.2, 84.8, 63.2, 69.8,…
  $ height           &lt;dbl&gt; 170.1, 171.6, 176.6, 186.0, 163.4, 180.1, 171.4, 168.…
  $ bp_sys_ave       &lt;int&gt; 119, 107, 121, 110, 127, 136, 122, 105, 131, 120, 99,…
  $ bp_dia_ave       &lt;int&gt; 62, 69, 68, 65, 88, 48, 87, 59, 56, 71, 61, 74, 84, 7…
  $ testosterone     &lt;dbl&gt; 44.35, 21.11, 746.95, 269.24, 256.92, 272.46, 466.11,…
  $ tot_chol         &lt;dbl&gt; 4.91, 4.42, 4.81, 4.42, 5.77, 7.29, 5.46, 5.25, 4.47,…
  $ diabetes         &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "Yes"…
  $ sleep_hrs_night  &lt;int&gt; 8, 7, 8, 8, 6, 8, 6, 5, 8, 6, 8, 7, 6, 5, 8, 8, 7, 8,…
  $ phys_active_days &lt;int&gt; 5, 7, 3, 2, 4, 2, 1, 1, 7, 4, 2, 5, 4, 7, 4, 3, 4, 6,…
```
]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%


# R Markdown Tables

Check out the codebook in the `rmd-tables.Rmd` file to get a better understanding of the NHANES variables.  

--

### Calculate Descriptives 

Below we calculate the descriptive statistics with some help from  [`dplyr`](https://dplyr.tidyverse.org/)

--


```r
descriptives &lt;- nhanes_11_12 |&gt; 
    mutate(ht_meters = height*0.01,
           bmi = weight/ht_meters^2) |&gt; 
    group_by(diabetes) |&gt; 
    summarise(n = n(), 
              across(c(age, bmi, bp_sys_ave, tot_chol), 
              mean, na.rm = TRUE))
```



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables


.leftcol[
If we print `descriptives` to the console, we see a `tibble` output

&lt;br&gt;

.code70[

```r
descriptives
```
]
.code55[

```
  # A tibble: 2 × 6
    diabetes     n   age   bmi bp_sys_ave tot_chol
    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
  1 No        1890  43.1  27.7       120.     5.00
  2 Yes        231  57.8  31.5       128.     4.83
```
]
]


--

.rightcol[
We can use `knitr::kable()` to get a basic formatted table. 

&lt;br&gt;

.font70[

```r
knitr::kable(descriptives)
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; diabetes &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bmi &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bp_sys_ave &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; tot_chol &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1890 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.12857 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.68338 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 119.7624 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.001571 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 231 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57.83117 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31.47395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 127.7749 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.829480 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

`knitr::kable()` allows us to adust the contents of the table with arguments like `digits` and `col.names`

.code80[

```r
knitr::kable(descriptives, digits = 2, 
    col.names = c("Diabetic", "N", "Age", "BMI", 
        "Sys BP (Avg)", "Total Chol"))
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Diabetic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; BMI &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Sys BP (Avg) &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Total Chol &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1890 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.68 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 119.76 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 231 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57.83 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 127.77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.83 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

&lt;br&gt;

Read more about `kable` table options [here](https://bookdown.org/yihui/rmarkdown-cookbook/kable.html) 



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

If we're looking at larger tables, we can use the `rmarkdown::paged_table()` function

&lt;br&gt;

.code80[

```r
big_descriptives &lt;- nhanes_11_12 |&gt;
    dplyr::select(-id) |&gt; # remove id
    dplyr::mutate(ht_meters = height * 0.01, # calculate new vars
                  bmi = weight / ht_meters ^ 2) |&gt;
    dplyr::group_by(diabetes) |&gt; # calculate by diabetes
    dplyr::summarise(n = n(), # get total
        dplyr::across(.cols = where(is.numeric), # all numeric variables
                      .fns =  mean, na.rm = TRUE)) # calculate mean 
```
]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

If we're looking at larger tables, we can use the `rmarkdown::paged_table()` function

&lt;br&gt;


```r
rmarkdown::paged_table(big_descriptives)
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["diabetes"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["age"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["poverty"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["weight"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["height"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["bp_sys_ave"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["bp_dia_ave"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["testosterone"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["tot_chol"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["sleep_hrs_night"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["phys_active_days"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["ht_meters"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["bmi"],"name":[14],"type":["dbl"],"align":["right"]}],"data":[{"1":"No","2":"1890","3":"43.12857","4":"2.879497","5":"79.54995","6":"169.2085","7":"119.7624","8":"71.18519","9":"238.5126","10":"5.001571","11":"6.852910","12":"3.597884","13":"1.692085","14":"27.68338"},{"1":"Yes","2":"231","3":"57.83117","4":"2.310563","5":"87.79481","6":"166.8013","7":"127.7749","8":"70.53247","9":"189.5030","10":"4.829481","11":"6.666667","12":"3.813853","13":"1.668013","14":"31.47395"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

The `gtsummary()` package has great functions for creating common tables. 

.leftcol[


```r
library(gtsummary)
tbl_vars &lt;- dplyr::select(nhanes_11_12, 
        diabetes, race3)
gtsummary::tbl_cross(
    data = tbl_vars,
    row = race3, col = diabetes)
```

]

.rightcol[

<div id="usybjzqszz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#usybjzqszz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#usybjzqszz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#usybjzqszz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#usybjzqszz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#usybjzqszz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#usybjzqszz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#usybjzqszz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#usybjzqszz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#usybjzqszz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#usybjzqszz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#usybjzqszz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#usybjzqszz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#usybjzqszz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#usybjzqszz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#usybjzqszz .gt_from_md > :first-child {
  margin-top: 0;
}

#usybjzqszz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#usybjzqszz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#usybjzqszz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#usybjzqszz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#usybjzqszz .gt_row_group_first td {
  border-top-width: 2px;
}

#usybjzqszz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#usybjzqszz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#usybjzqszz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#usybjzqszz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#usybjzqszz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#usybjzqszz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#usybjzqszz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#usybjzqszz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#usybjzqszz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#usybjzqszz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#usybjzqszz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#usybjzqszz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#usybjzqszz .gt_left {
  text-align: left;
}

#usybjzqszz .gt_center {
  text-align: center;
}

#usybjzqszz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#usybjzqszz .gt_font_normal {
  font-weight: normal;
}

#usybjzqszz .gt_font_bold {
  font-weight: bold;
}

#usybjzqszz .gt_font_italic {
  font-style: italic;
}

#usybjzqszz .gt_super {
  font-size: 65%;
}

#usybjzqszz .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#usybjzqszz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#usybjzqszz .gt_indent_1 {
  text-indent: 5px;
}

#usybjzqszz .gt_indent_2 {
  text-indent: 10px;
}

#usybjzqszz .gt_indent_3 {
  text-indent: 15px;
}

#usybjzqszz .gt_indent_4 {
  text-indent: 20px;
}

#usybjzqszz .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="diabetes">
        <span class="gt_column_spanner">diabetes</span>
      </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Total">Total</th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">race3</td>
<td headers="stat_1" class="gt_row gt_center"></td>
<td headers="stat_2" class="gt_row gt_center"></td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Asian</td>
<td headers="stat_1" class="gt_row gt_center">308</td>
<td headers="stat_2" class="gt_row gt_center">32</td>
<td headers="stat_0" class="gt_row gt_center">340</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Black</td>
<td headers="stat_1" class="gt_row gt_center">412</td>
<td headers="stat_2" class="gt_row gt_center">77</td>
<td headers="stat_0" class="gt_row gt_center">489</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Hispanic</td>
<td headers="stat_1" class="gt_row gt_center">162</td>
<td headers="stat_2" class="gt_row gt_center">16</td>
<td headers="stat_0" class="gt_row gt_center">178</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Mexican</td>
<td headers="stat_1" class="gt_row gt_center">154</td>
<td headers="stat_2" class="gt_row gt_center">27</td>
<td headers="stat_0" class="gt_row gt_center">181</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Other</td>
<td headers="stat_1" class="gt_row gt_center">61</td>
<td headers="stat_2" class="gt_row gt_center">8</td>
<td headers="stat_0" class="gt_row gt_center">69</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    White</td>
<td headers="stat_1" class="gt_row gt_center">793</td>
<td headers="stat_2" class="gt_row gt_center">71</td>
<td headers="stat_0" class="gt_row gt_center">864</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Total</td>
<td headers="stat_1" class="gt_row gt_center">1,890</td>
<td headers="stat_2" class="gt_row gt_center">231</td>
<td headers="stat_0" class="gt_row gt_center">2,121</td></tr>
  </tbody>
  
  
</table>
</div>


]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

We can add lables with the [`labelled` package.](https://cran.r-project.org/web/packages/labelled/vignettes/intro_labelled.html) 

.leftcol[


```r
library(labelled)
var_label(tbl_vars) &lt;- list(
    race3 = "Race",
    diabetes = "Diabetes Status")
tbl_cross(data = tbl_vars, 
    row = race3, col = diabetes)
```

]

.rightcol[

<div id="qlbrvppbsw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qlbrvppbsw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qlbrvppbsw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qlbrvppbsw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qlbrvppbsw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qlbrvppbsw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qlbrvppbsw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qlbrvppbsw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qlbrvppbsw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qlbrvppbsw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qlbrvppbsw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qlbrvppbsw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qlbrvppbsw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qlbrvppbsw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qlbrvppbsw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qlbrvppbsw .gt_from_md > :first-child {
  margin-top: 0;
}

#qlbrvppbsw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qlbrvppbsw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qlbrvppbsw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qlbrvppbsw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qlbrvppbsw .gt_row_group_first td {
  border-top-width: 2px;
}

#qlbrvppbsw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlbrvppbsw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qlbrvppbsw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qlbrvppbsw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qlbrvppbsw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlbrvppbsw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qlbrvppbsw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qlbrvppbsw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qlbrvppbsw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qlbrvppbsw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlbrvppbsw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qlbrvppbsw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlbrvppbsw .gt_left {
  text-align: left;
}

#qlbrvppbsw .gt_center {
  text-align: center;
}

#qlbrvppbsw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qlbrvppbsw .gt_font_normal {
  font-weight: normal;
}

#qlbrvppbsw .gt_font_bold {
  font-weight: bold;
}

#qlbrvppbsw .gt_font_italic {
  font-style: italic;
}

#qlbrvppbsw .gt_super {
  font-size: 65%;
}

#qlbrvppbsw .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#qlbrvppbsw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qlbrvppbsw .gt_indent_1 {
  text-indent: 5px;
}

#qlbrvppbsw .gt_indent_2 {
  text-indent: 10px;
}

#qlbrvppbsw .gt_indent_3 {
  text-indent: 15px;
}

#qlbrvppbsw .gt_indent_4 {
  text-indent: 20px;
}

#qlbrvppbsw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Diabetes Status">
        <span class="gt_column_spanner">Diabetes Status</span>
      </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Total">Total</th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">Race</td>
<td headers="stat_1" class="gt_row gt_center"></td>
<td headers="stat_2" class="gt_row gt_center"></td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Asian</td>
<td headers="stat_1" class="gt_row gt_center">308</td>
<td headers="stat_2" class="gt_row gt_center">32</td>
<td headers="stat_0" class="gt_row gt_center">340</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Black</td>
<td headers="stat_1" class="gt_row gt_center">412</td>
<td headers="stat_2" class="gt_row gt_center">77</td>
<td headers="stat_0" class="gt_row gt_center">489</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Hispanic</td>
<td headers="stat_1" class="gt_row gt_center">162</td>
<td headers="stat_2" class="gt_row gt_center">16</td>
<td headers="stat_0" class="gt_row gt_center">178</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Mexican</td>
<td headers="stat_1" class="gt_row gt_center">154</td>
<td headers="stat_2" class="gt_row gt_center">27</td>
<td headers="stat_0" class="gt_row gt_center">181</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Other</td>
<td headers="stat_1" class="gt_row gt_center">61</td>
<td headers="stat_2" class="gt_row gt_center">8</td>
<td headers="stat_0" class="gt_row gt_center">69</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    White</td>
<td headers="stat_1" class="gt_row gt_center">793</td>
<td headers="stat_2" class="gt_row gt_center">71</td>
<td headers="stat_0" class="gt_row gt_center">864</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Total</td>
<td headers="stat_1" class="gt_row gt_center">1,890</td>
<td headers="stat_2" class="gt_row gt_center">231</td>
<td headers="stat_0" class="gt_row gt_center">2,121</td></tr>
  </tbody>
  
  
</table>
</div>

]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

Options for adding percentages and p-values `add_p()`

.leftcol[


```r
library(labelled)
var_label(tbl_vars) &lt;- list(
    race3 = "Race",
    diabetes = "Diabetes Status")
tbl_cross(data = tbl_vars, 
    row = race3, col = diabetes, 
    percent = "cell") |&gt; 
    add_p() 
```

]

.rightcol[

<div id="dwygnyiyja" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#dwygnyiyja .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dwygnyiyja .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dwygnyiyja .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dwygnyiyja .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dwygnyiyja .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dwygnyiyja .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dwygnyiyja .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dwygnyiyja .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dwygnyiyja .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dwygnyiyja .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dwygnyiyja .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dwygnyiyja .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dwygnyiyja .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dwygnyiyja .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dwygnyiyja .gt_from_md > :first-child {
  margin-top: 0;
}

#dwygnyiyja .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dwygnyiyja .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dwygnyiyja .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dwygnyiyja .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dwygnyiyja .gt_row_group_first td {
  border-top-width: 2px;
}

#dwygnyiyja .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dwygnyiyja .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dwygnyiyja .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dwygnyiyja .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dwygnyiyja .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dwygnyiyja .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dwygnyiyja .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dwygnyiyja .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dwygnyiyja .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dwygnyiyja .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dwygnyiyja .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dwygnyiyja .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dwygnyiyja .gt_left {
  text-align: left;
}

#dwygnyiyja .gt_center {
  text-align: center;
}

#dwygnyiyja .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dwygnyiyja .gt_font_normal {
  font-weight: normal;
}

#dwygnyiyja .gt_font_bold {
  font-weight: bold;
}

#dwygnyiyja .gt_font_italic {
  font-style: italic;
}

#dwygnyiyja .gt_super {
  font-size: 65%;
}

#dwygnyiyja .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#dwygnyiyja .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dwygnyiyja .gt_indent_1 {
  text-indent: 5px;
}

#dwygnyiyja .gt_indent_2 {
  text-indent: 10px;
}

#dwygnyiyja .gt_indent_3 {
  text-indent: 15px;
}

#dwygnyiyja .gt_indent_4 {
  text-indent: 20px;
}

#dwygnyiyja .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="Diabetes Status">
        <span class="gt_column_spanner">Diabetes Status</span>
      </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Total">Total</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="p-value&lt;sup class=&quot;gt_footnote_marks&quot;&gt;1&lt;/sup&gt;">p-value<sup class="gt_footnote_marks">1</sup></th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">Race</td>
<td headers="stat_1" class="gt_row gt_center"></td>
<td headers="stat_2" class="gt_row gt_center"></td>
<td headers="stat_0" class="gt_row gt_center"></td>
<td headers="p.value" class="gt_row gt_center"><0.001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Asian</td>
<td headers="stat_1" class="gt_row gt_center">308 (15%)</td>
<td headers="stat_2" class="gt_row gt_center">32 (1.5%)</td>
<td headers="stat_0" class="gt_row gt_center">340 (16%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Black</td>
<td headers="stat_1" class="gt_row gt_center">412 (19%)</td>
<td headers="stat_2" class="gt_row gt_center">77 (3.6%)</td>
<td headers="stat_0" class="gt_row gt_center">489 (23%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Hispanic</td>
<td headers="stat_1" class="gt_row gt_center">162 (7.6%)</td>
<td headers="stat_2" class="gt_row gt_center">16 (0.8%)</td>
<td headers="stat_0" class="gt_row gt_center">178 (8.4%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Mexican</td>
<td headers="stat_1" class="gt_row gt_center">154 (7.3%)</td>
<td headers="stat_2" class="gt_row gt_center">27 (1.3%)</td>
<td headers="stat_0" class="gt_row gt_center">181 (8.5%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Other</td>
<td headers="stat_1" class="gt_row gt_center">61 (2.9%)</td>
<td headers="stat_2" class="gt_row gt_center">8 (0.4%)</td>
<td headers="stat_0" class="gt_row gt_center">69 (3.3%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    White</td>
<td headers="stat_1" class="gt_row gt_center">793 (37%)</td>
<td headers="stat_2" class="gt_row gt_center">71 (3.3%)</td>
<td headers="stat_0" class="gt_row gt_center">864 (41%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">Total</td>
<td headers="stat_1" class="gt_row gt_center">1,890 (89%)</td>
<td headers="stat_2" class="gt_row gt_center">231 (11%)</td>
<td headers="stat_0" class="gt_row gt_center">2,121 (100%)</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">1</sup> Pearson's Chi-squared test</td>
    </tr>
  </tfoot>
</table>
</div>

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

The `gt_summary::tbl_summary()` function creates publication-quality summary tables with multiple statistical summary options.

.leftcol[

.code70[


```r
tbl_vars &lt;- nhanes_11_12 |&gt; 
    dplyr::mutate(ht_meters = height*0.01,
           bmi = weight/ht_meters^2) |&gt; 
    dplyr::select(age, gender, 
        bmi, bp_sys_ave, bp_dia_ave)
var_label(tbl_vars) &lt;- list(
    age = "Age",
    gender = "Gender",
    bmi = "BMI",
    bp_sys_ave = "Sys Avg",
    bp_dia_ave = "Dia Avg")
```

]

]

.rightcol[


```r
gtsummary::tbl_summary(tbl_vars)
```

<div id="ytylpykmpb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ytylpykmpb .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ytylpykmpb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ytylpykmpb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ytylpykmpb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ytylpykmpb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ytylpykmpb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ytylpykmpb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ytylpykmpb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ytylpykmpb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ytylpykmpb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ytylpykmpb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ytylpykmpb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ytylpykmpb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ytylpykmpb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ytylpykmpb .gt_from_md > :first-child {
  margin-top: 0;
}

#ytylpykmpb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ytylpykmpb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ytylpykmpb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ytylpykmpb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ytylpykmpb .gt_row_group_first td {
  border-top-width: 2px;
}

#ytylpykmpb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ytylpykmpb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ytylpykmpb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ytylpykmpb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ytylpykmpb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ytylpykmpb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ytylpykmpb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ytylpykmpb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ytylpykmpb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ytylpykmpb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ytylpykmpb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ytylpykmpb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ytylpykmpb .gt_left {
  text-align: left;
}

#ytylpykmpb .gt_center {
  text-align: center;
}

#ytylpykmpb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ytylpykmpb .gt_font_normal {
  font-weight: normal;
}

#ytylpykmpb .gt_font_bold {
  font-weight: bold;
}

#ytylpykmpb .gt_font_italic {
  font-style: italic;
}

#ytylpykmpb .gt_super {
  font-size: 65%;
}

#ytylpykmpb .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ytylpykmpb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ytylpykmpb .gt_indent_1 {
  text-indent: 5px;
}

#ytylpykmpb .gt_indent_2 {
  text-indent: 10px;
}

#ytylpykmpb .gt_indent_3 {
  text-indent: 15px;
}

#ytylpykmpb .gt_indent_4 {
  text-indent: 20px;
}

#ytylpykmpb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N = 2,121&lt;/strong&gt;&lt;sup class=&quot;gt_footnote_marks&quot;&gt;1&lt;/sup&gt;"><strong>N = 2,121</strong><sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">Age</td>
<td headers="stat_0" class="gt_row gt_center">42 (30, 58)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Gender</td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    female</td>
<td headers="stat_0" class="gt_row gt_center">1,008 (48%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    male</td>
<td headers="stat_0" class="gt_row gt_center">1,113 (52%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">BMI</td>
<td headers="stat_0" class="gt_row gt_center">27.0 (23.7, 31.3)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Sys Avg</td>
<td headers="stat_0" class="gt_row gt_center">118 (110, 129)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Dia Avg</td>
<td headers="stat_0" class="gt_row gt_center">71 (64, 78)</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="2"><sup class="gt_footnote_marks">1</sup> Median (IQR); n (%)</td>
    </tr>
  </tfoot>
</table>
</div>


]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

We can also create grouped summaries with `gtsummary::tbl_summary(by = )`:

.leftcol[

.code70[


```r
tbl_vars &lt;- nhanes_11_12 |&gt; 
    dplyr::mutate(
     ht_meters = height*0.01,
     bmi = weight/ht_meters^2,
     diabetes = if_else(diabetes == "Yes", 
                 "Diabetic", "Healthy")) |&gt; 
    dplyr::select(age, diabetes, gender, 
        bmi, bp_sys_ave, bp_dia_ave)
var_label(tbl_vars) &lt;- list(
    age = "Age",
    diabetes = "Diabetic",
    gender = "Gender",
    bmi = "BMI",
    bp_sys_ave = "Sys Avg",
    bp_dia_ave = "Dia Avg")
```

]

]

.rightcol[


```r
gtsummary::tbl_summary(tbl_vars, 
    by = diabetes)
```

<div id="ulugcyiqdj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ulugcyiqdj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ulugcyiqdj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulugcyiqdj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ulugcyiqdj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ulugcyiqdj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ulugcyiqdj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulugcyiqdj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulugcyiqdj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ulugcyiqdj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ulugcyiqdj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ulugcyiqdj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ulugcyiqdj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ulugcyiqdj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ulugcyiqdj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ulugcyiqdj .gt_from_md > :first-child {
  margin-top: 0;
}

#ulugcyiqdj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ulugcyiqdj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ulugcyiqdj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ulugcyiqdj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ulugcyiqdj .gt_row_group_first td {
  border-top-width: 2px;
}

#ulugcyiqdj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulugcyiqdj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ulugcyiqdj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ulugcyiqdj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulugcyiqdj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulugcyiqdj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ulugcyiqdj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ulugcyiqdj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulugcyiqdj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulugcyiqdj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulugcyiqdj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulugcyiqdj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulugcyiqdj .gt_left {
  text-align: left;
}

#ulugcyiqdj .gt_center {
  text-align: center;
}

#ulugcyiqdj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ulugcyiqdj .gt_font_normal {
  font-weight: normal;
}

#ulugcyiqdj .gt_font_bold {
  font-weight: bold;
}

#ulugcyiqdj .gt_font_italic {
  font-style: italic;
}

#ulugcyiqdj .gt_super {
  font-size: 65%;
}

#ulugcyiqdj .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ulugcyiqdj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ulugcyiqdj .gt_indent_1 {
  text-indent: 5px;
}

#ulugcyiqdj .gt_indent_2 {
  text-indent: 10px;
}

#ulugcyiqdj .gt_indent_3 {
  text-indent: 15px;
}

#ulugcyiqdj .gt_indent_4 {
  text-indent: 20px;
}

#ulugcyiqdj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Diabetic&lt;/strong&gt;, N = 231&lt;sup class=&quot;gt_footnote_marks&quot;&gt;1&lt;/sup&gt;"><strong>Diabetic</strong>, N = 231<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Healthy&lt;/strong&gt;, N = 1,890&lt;sup class=&quot;gt_footnote_marks&quot;&gt;1&lt;/sup&gt;"><strong>Healthy</strong>, N = 1,890<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">Age</td>
<td headers="stat_1" class="gt_row gt_center">60 (50, 68)</td>
<td headers="stat_2" class="gt_row gt_center">40 (29, 56)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Gender</td>
<td headers="stat_1" class="gt_row gt_center"></td>
<td headers="stat_2" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    female</td>
<td headers="stat_1" class="gt_row gt_center">112 (48%)</td>
<td headers="stat_2" class="gt_row gt_center">896 (47%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    male</td>
<td headers="stat_1" class="gt_row gt_center">119 (52%)</td>
<td headers="stat_2" class="gt_row gt_center">994 (53%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">BMI</td>
<td headers="stat_1" class="gt_row gt_center">30.2 (26.5, 35.4)</td>
<td headers="stat_2" class="gt_row gt_center">26.6 (23.4, 30.7)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Sys Avg</td>
<td headers="stat_1" class="gt_row gt_center">127 (116, 136)</td>
<td headers="stat_2" class="gt_row gt_center">118 (109, 128)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Dia Avg</td>
<td headers="stat_1" class="gt_row gt_center">70 (63, 79)</td>
<td headers="stat_2" class="gt_row gt_center">71 (64, 78)</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="3"><sup class="gt_footnote_marks">1</sup> Median (IQR); n (%)</td>
    </tr>
  </tfoot>
</table>
</div>


]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

### R Markdown also supports inline R code 

--

&lt;img src="www/inline-r-code-01.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

### Inline R code allows us to include summaries of our analysis in the report

--

&lt;img src="www/inline-r-code-02.png" width="80%" height="80%" style="display: block; margin: auto;" /&gt;


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Tables

### We're going to add the summary statistics in `descriptives` to our `rmd-tables.Rmd` report.

.leftcol[

.font90[Include the following code under the `Summary` two-level header]

.code60[


```r
descriptives
```

```
  # A tibble: 2 × 6
    diabetes     n   age   bmi bp_sys_ave tot_chol
    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
  1 No        1890  43.1  27.7       120.     5.00
  2 Yes        231  57.8  31.5       128.     4.83
```

]

]

--

.rightcol[

```
The average age in `nhanes_11_12` is 44.73. The correlation between age and average systolic blood pressure is 0.42
```

]

---
background-image: url(www/pdg-hex.png)
class: center, middle, inverse
background-position: 96% 4%
background-size: 6%

# R Markdown Data Visualizations

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# R Markdown Data Visualizations

The `NHANES` package comes with data from the [2014 American National Health and Nutrition Examination surveys](http://www.cdc.gov/nchs/data/series/sr_02/sr02_162.pdf). We will load a sample from it below:


```r
library(NHANES)
SmallNhanes &lt;- NHANES |&gt; 
  select(ID, Gender, Age, AgeDecade, Race1, HealthGen,
         Height, BMI, Weight, Pulse, BPSysAve) 
```

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Quick Tip: Column Names

Standardize names with `janitor::clean_names()`


```r
SmallNhanes &lt;- SmallNhanes |&gt; janitor::clean_names()
glimpse(SmallNhanes)
```

.code50[

```
  Rows: 10,000
  Columns: 11
  $ id         &lt;int&gt; 51624, 51624, 51624, 51625, 51630, 51638, 51646, 51647, 516…
  $ gender     &lt;fct&gt; male, male, male, male, female, male, male, female, female,…
  $ age        &lt;int&gt; 34, 34, 34, 4, 49, 9, 8, 45, 45, 45, 66, 58, 54, 10, 58, 50…
  $ age_decade &lt;fct&gt;  30-39,  30-39,  30-39,  0-9,  40-49,  0-9,  0-9,  40-49,  …
  $ race1      &lt;fct&gt; White, White, White, Other, White, White, White, White, Whi…
  $ health_gen &lt;fct&gt; Good, Good, Good, NA, Good, NA, NA, Vgood, Vgood, Vgood, Vg…
  $ height     &lt;dbl&gt; 164.7, 164.7, 164.7, 105.4, 168.4, 133.1, 130.6, 166.7, 166…
  $ bmi        &lt;dbl&gt; 32.22, 32.22, 32.22, 15.30, 30.57, 16.82, 20.64, 27.24, 27.…
  $ weight     &lt;dbl&gt; 87.4, 87.4, 87.4, 17.0, 86.7, 29.8, 35.2, 75.7, 75.7, 75.7,…
  $ pulse      &lt;int&gt; 70, 70, 70, NA, 86, 82, 72, 62, 62, 62, 60, 62, 76, 80, 94,…
  $ bp_sys_ave &lt;int&gt; 113, 113, 113, NA, 112, 86, 107, 118, 118, 118, 111, 104, 1…
```
]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Formating factors

We have a `health_gen` variable with the following levels:

Excellent, Vgood, Good, Fair, or Poor. These are ordered.

--


```r
SmallNhanes &lt;- SmallNhanes |&gt; 
    mutate(health_gen = factor(x = health_gen, 
                               levels = c("Poor", "Fair", 
                                          "Good", "Vgood", 
                                          "Excellent"), 
                                ordered = TRUE))
```

--


```r
levels(SmallNhanes$health_gen)
```

```
  [1] "Poor"      "Fair"      "Good"      "Vgood"     "Excellent"
```



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# `ggplot2`

### The *.red[Layered]* grammar of graphics

--

&lt;br&gt;

How it works:

1) Graphs are _initialized_ with `ggplot()`

--

2) Variables are _mapped_ to aesthetics

--

3) Geoms are linked to _statistics_

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

.large[*What relationship do we expect to see between height and weight?*]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

#### .font90[1) Use data with pipe to initialize graph]

.font80[
`SmallNhanes |&gt;`   
]

--

#### .font90[2) Map variables to aesthetics]

.font80[
`SmallNhanes |&gt;`   
`ggplot(mapping = aes(x = weight, y = height))`
]


--

#### .font90[3) Add geoms and layers] 

.font80[
`SmallNhanes |&gt;`  
    `ggplot(mapping = aes(x = weight, y = height)) +`  
    `geom_point()`
]


---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%

.border[


```r
SmallNhanes %&gt;% 
* ggplot() # initialize
```

&lt;img src="www/initialize-1.png" width="80%" height="80%" style="display: block; margin: auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%

.border[


```r
SmallNhanes %&gt;% 
* ggplot(mapping = aes(x = weight, y = height)) # map variables
```

&lt;img src="www/mapping-1.png" width="80%" height="80%" style="display: block; margin: auto;" /&gt;

]


---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%

.border[


```r
SmallNhanes %&gt;% 
  ggplot(mapping = aes(x = weight, y = height)) + 
* geom_point() # add geoms
```

&lt;img src="www/geoms-1.png" width="80%" height="80%" style="display: block; margin: auto;" /&gt;

]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# `ggplot2` template

#### Initialize the plot the `ggplot()`, map the aesthetics, and add a `&lt;GEOM_FUNCTION&gt;`


```r
&lt;DATA&gt; %&gt;% 
  ggplot(mapping = aes(&lt;MAPPINGS&gt;)) + 
  &lt;GEOM_FUNCTION&gt;()
```

--

#### We can add more aesthetics *inside* geoms


```r
&lt;DATA&gt; %&gt;% 
  ggplot(mapping = aes(&lt;MAPPINGS&gt;)) + 
* &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))
```


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# `ggplot2` template

#### Because `ggplot2` is a language of layers, we can continue adding *more* geoms


```r
&lt;DATA&gt; %&gt;% 
  ggplot(mapping = aes(&lt;MAPPINGS&gt;)) + 
* &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;)) +
* &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))
```

#### Note the different syntax (.red[%&gt;%] vs. .red[+])



```r
&lt;DATA&gt; %&gt;% #&lt;&lt; pipe!
  ggplot(mapping = aes(&lt;MAPPINGS&gt;)) + #&lt;&lt; plus!
  &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))
```

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Aesthetics

#### Is the relationship between `weight` and `height` the same for both `gender`s?

--

*We can explore this by mapping the variables to different aesthetics*

--

#### Aesthetics as graph elements (`color`, `size`, `shape`, and `alpha`)

.border[

&lt;img src="www/graph-elements.png" width="80%" height="80%" style="display: block; margin: auto;" /&gt;

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Global `ggplot2` mapping

### ***inside the `ggplot()` function*** = setting variables ***globally***

&lt;img src="www/ggplot2-template-01.png" width="90%" height="90%" /&gt;

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Local `ggplot2` mapping

### ***inside the `geom()` function*** = setting variables ***locally***

&lt;img src="www/ggplot2-template-02.png" width="85%" height="85%" /&gt;

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Your Turn

### Set local vs. global aesthetic mappings

.leftcol[

*From here...*


```r
SmallNhanes %&gt;% 
  ggplot( 
*     mapping =
*         aes(x = weight, y = height)) +
  geom_point() + 
  geom_smooth()
```

]


--

.rightcol[

*...to here.*


```r
SmallNhanes %&gt;% 
  ggplot() + 
  geom_point( 
*     mapping =
*         aes(x = weight, y = height)) +
  geom_smooth(
*     mapping =
*         aes(x = weight, y = height))
```

]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Your Turn (solution 1)

.border[


```r
SmallNhanes %&gt;% 
* ggplot(mapping = aes(x = weight, y = height)) +
  geom_point() + 
  geom_smooth()
```

&lt;img src="www/aes-in-ggplot2-sol-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Your Turn (solution 2)

.border[


```r
SmallNhanes %&gt;% 
  ggplot() + 
* geom_point(mapping = aes(x = weight, y = height)) +
* geom_smooth(mapping = aes(x = weight, y = height))
```

&lt;img src="www/aes-in-geom-sol-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Variables, Aestheitcs, and Geoms


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Variables, Aestheitcs, and Geoms (1)

Each graph needs a variable or value, an aesthetic, and geom (the accompanying graphic, geometry)

--


```r
*geom_point(mapping = aes(x = weight, y = height)) + # layer 1
*geom_smooth(mapping = aes(x = weight, y = height)) # layer 2
```

--

| variable  |   aesthetic   |  geom            |
|:---------:|:-------------:|:----------------:|
| `weight`  | position = `x`| dots = `point`   |
| `height`  | position = `y`| dots = `point`   |
| `weight`  | position = `x`| line = `smooth`  |
| `height`  | position = `y`| line = `smooth`  |

--

These have the same aesthetics! What if we added a layer with a variable mapped to a different aesthetic?


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Variables, Aestheitcs, and Geoms (2)

But we can add *more* variables, map them to *different* aesthetics, and *adding* another `geom` layer

--

Add another layer, coloring the points by `gender`


```r
SmallNhanes %&gt;% 
  ggplot() + 
* geom_point(mapping = aes(x = weight, y = height)) +
* geom_point(mapping = aes(color = gender))
```

--

| variable  |   aesthetic    |  geom            |
|:---------:|:--------------:|:----------------:|
| `weight`  | position = `x` | dots = `point`   |
| `height`  | position = `y` | dots = `point`   |
| `gender`  | color = `color`| dots = `point`   |

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Variables, Aestheitcs, and Geoms (3)


.leftcol55[

#### ERROR!


```r
SmallNhanes %&gt;% 
  ggplot() + 
  geom_point(
*     aes(x = weight, y = height)) +
  geom_point(
*     aes(color = gender))
```


```r
# Error: geom_point requires the following missing aesthetics: x and y
```

]


.rightcol45[

#### SOLUTION

All `geom`s have required aesthetics--map variables globally 


```r
SmallNhanes %&gt;% 
  ggplot(
*   aes(x = weight, y = height)) +
*   geom_point(aes(color = gender))
```

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Aesthetics: color 


.border[


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
*   geom_point(aes(color = gender))
```

&lt;img src="www/color-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Aesthetics: size 

.border[


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
*   geom_point(aes(color = gender, size = gender))
```

&lt;img src="www/size-point-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Aesthetics: shape

.border[


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
*   geom_point(aes(color = gender, size = gender, shape = gender))
```

&lt;img src="www/shape-point-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Aesthetics: alpha (opacity)

.border[


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
*   geom_point(aes(color = gender, alpha = gender))
```

&lt;img src="www/alpha-point-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Aesthetic mappings 

--

.pull-left[

#### Legend is automatically included 

#### Continuous variables best with `size`

]

--

.pull-right[.border[

&lt;img src="www/aes-settings.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;

]]

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Setting values vs. mapping variables

### How can we create this plot?

.border[

&lt;img src="www/red-points-1-1.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Inside `aes()`

.border[


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
*   geom_point(aes(color = "red")) # inside aes
```

&lt;img src="www/inside-aes-no-eval-1.png" width="65%" height="65%" style="display: block; margin: auto;" /&gt;

]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

### Outside `aes()`

.border[


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
* geom_point(color = "red") # outside aes
```

&lt;img src="www/red-points-1.png" width="65%" height="65%" style="display: block; margin: auto;" /&gt;

]




---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## What happened?

`aes()` expected a variable, not a value (`"red"`).


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
* geom_point(aes(color = "red")) # "value" in aes
```

--

.border[

&lt;img src="www/inside-aes-no-eval-2-1.png" width="50%" height="50%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Geoms (geometric objects)

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Geoms 

--

### These are visual elements used to represent the data of the graph

--

### Examples include: 

- `geom_boxplot`  
- `geom_col` 
- `geom_line` 
- `geom_smooth`

--

### See the cheatsheet for more examples: 

https://bit.ly/ggplot2-cheat

---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Your Turn

--

### *How does BMI vary across levels of self-reported general health?*

--

### Complete the code below: 

Map the variables locally inside the `geom_boxplot()` function


```r
SmallNhanes %&gt;% 
  ggplot() %&gt;% 
  geom_boxplot(mapping = aes(x = __________, y = ___))
```


---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%


```r
SmallNhanes %&gt;% 
  ggplot() +
* geom_boxplot(mapping = aes(x = health_gen, y = bmi))
```

--

#### Box-plots are great for seeing how a continuous variable varies across a categorical variable

.border[

&lt;img src="www/box-plot-show-1-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]





---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Your Turn

&lt;br&gt;

--

### Fill in the code below to change the colors in the boxplot for each level of `health_gen` 



```r
SmallNhanes %&gt;% 
  ggplot() +
  geom_boxplot(
*   aes(x = health_gen, y = bmi, _____ = health_gen))
```



---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%


```r
SmallNhanes %&gt;% 
  ggplot() +
  geom_boxplot(
*   aes(x = health_gen, y = bmi, color = health_gen))
```

--

.border[

*Color is not the setting we want here...*

&lt;img src="www/box-plot-color-1-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]




---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%


```r
SmallNhanes %&gt;% 
  ggplot() +
  geom_boxplot(
*   aes(x = health_gen, y = bmi, fill = health_gen))
```

--

.border[

*Fill is better*

&lt;img src="www/box-plot-fill-1-1.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

]


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%
# Adding layers 

--

### The 'infinitely extensible' part of `ggplot2` is where we start to really see it's power

--

### Consider the relationship between `height` and `weight` again 


---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%


```r
SmallNhanes %&gt;% 
* ggplot(aes(x = weight, y = height)) + # global
  geom_point(aes(color = gender))
```

--

.border[

&lt;img src="www/layer-1-plot-1-1.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
  geom_point(aes(color = gender)) + 
* geom_smooth(data = # data 2
*               filter(SmallNhanes, gender == "male"), # layer 2
              aes(x = weight, y = height), 
              color = "blue") 
```

--

.border[

&lt;img src="www/layer-2-plot-1-1.png" width="64%" height="64%" style="display: block; margin: auto;" /&gt;

]




---
background-image: url(www/pdg-hex.png)
background-position: 4% 96%
background-size: 6%


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
  geom_point(aes(color = gender)) + 
  geom_smooth(data = 
                filter(SmallNhanes, gender == "male"), 
              aes(x = weight, y = height), 
              color = "blue") + 
*   geom_smooth(data = # data 3
*                 filter(SmallNhanes, gender == "female"), # layer 3
              aes(x = weight, y = height), 
              color = "red") 
```

--

.border[

&lt;img src="www/layer-3-plot-1-1.png" width="48%" height="18%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Facets


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Faceting 

### Facet layers display subplots for levels of categorical variables 

&lt;br&gt;

| Facet layer                  |   Display                                  |
|:-----------------------------|:-------------------------------------------|
| `facet_wrap(. ~ gender)`     | Plot for each level of `gender`            |
| `facet_wrap(race1 ~ gender)` | Plot for each level of `gender` and `race` |
| `facet_wrap(. ~ gender, ncol = 1)` | Specify the number of columns        |
| `facet_wrap(. ~ gender, nrow = 1)` | Specify the number of rows           |


---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Facet Single Variable


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
  geom_point(aes(color = gender)) + 
* facet_wrap(. ~ gender)
```

.border[

&lt;img src="www/facet_wrap-1-1.png" width="52%" height="35%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Facet Two Variables


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
  geom_point(aes(color = gender)) + 
* facet_wrap(race1 ~ gender)
```

.border[

&lt;img src="www/facet_wrap-2vars-1-1.png" width="52%" height="42%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Facet: Set Columns


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
  geom_point(aes(color = gender)) + 
* facet_wrap(race1 ~ gender, ncol = 5)
```

.border[

&lt;img src="www/facet_wrap-cols-1-1.png" width="52%" height="42%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

## Facet: Set Rows


```r
SmallNhanes %&gt;% 
  ggplot(aes(x = weight, y = height)) + 
  geom_point(aes(color = gender)) + 
* facet_wrap(race1 ~ gender, nrow = 2)
```

.border[

&lt;img src="www/facet_wrap-rows-1-1.png" width="52%" height="42%" style="display: block; margin: auto;" /&gt;

]



---
background-image: url(www/pdg-hex.png)
background-position: 96% 4%
background-size: 6%

# Recap

#### 1) Introduction the grammar of graphics syntax

#### 2) Identifying graph aesthetics (position, color, shape, opacity, etc.)

#### 3) Recognizing and using `geoms` (`geom_point`, `geom_smooth`, etc.)

#### 4) Facetting graphs (`facet_wrap` with 1 or two variables)


---
background-image: url(www/pdg-hex.png)
class: center, middle, inverse
background-position: 96% 4%
background-size: 6%

# Exporting Data
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
